<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Token Verification</title>
<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
</head>
<body>

<h2>Login</h2>
<form id="loginForm">
  <label for="token">Token:</label><br>
  <input type="text" id="token" name="token"><br>
  <button type="button" onclick="verifyToken()">Login</button>
</form>

<script>
function verifyToken() {
  // Mendapatkan token dari input
  var tokenHex = document.getElementById("token").value.trim();

  // Mengubah token dari HEX ke DEC
  var tokenDec;
  try {
    tokenDec = parseInt(tokenHex, 16);
  } catch (error) {
    // Menampilkan pesan kesalahan jika token tidak valid
    alert("Token tidak valid");
    return;
  }

  // Mendapatkan tanggal dan jam saat ini
  var currentDate = new Date();
  // Menggabungkan tanggal dan jam saat ini menjadi satu string dengan format "ddMMyyyyHH"
  var formattedDateTime = currentDate.getDate() + 
                          ('0' + (currentDate.getMonth() + 1)).slice(-2) +
                          currentDate.getFullYear() +
                          ('0' + currentDate.getHours()).slice(-2);

  // Memeriksa apakah token DEC sesuai dengan tanggal dan jam saat ini
  var expectedTokenDec = parseInt(formattedDateTime);
  if (tokenDec === expectedTokenDec) {
    // Jika token DEC valid, arahkan pengguna ke URL tujuan
    window.location.href = "priv.html";
  } else {
    // Jika token DEC tidak valid, tampilkan pesan kesalahan
    alert("Token tidak valid");
  }
}
</script>

</body>
</html>